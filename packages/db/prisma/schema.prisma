// Prisma schema for SQLite
datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

// Task Management App Models
model Task {
    id          Int       @id @default(autoincrement())
    title       String
    description String?
    completed   Boolean   @default(false)
    categoryId  Int?
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt
    category    Category? @relation(fields: [categoryId], references: [id])
    tags        TaskTag[]
}

model Category {
    id        Int      @id @default(autoincrement())
    name      String   @unique
    color     String   @default("#3b82f6")
    createdAt DateTime @default(now())
    tasks     Task[]
}

model Tag {
    id        Int       @id @default(autoincrement())
    name      String    @unique
    color     String    @default("#10b981")
    createdAt DateTime  @default(now())
    tasks     TaskTag[]
}

model TaskTag {
    taskId Int
    tagId  Int
    task   Task @relation(fields: [taskId], references: [id], onDelete: Cascade)
    tag    Tag  @relation(fields: [tagId], references: [id], onDelete: Cascade)

    @@id([taskId, tagId])
}
